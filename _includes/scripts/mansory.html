{% if site.enable_mansory %}
<!-- Mansory & imagesLoaded - Conditional Loading -->
<script>
  // Only load masonry if grid elements are present
  document.addEventListener('DOMContentLoaded', function() {
    if (document.querySelector('.grid')) {
      // Load masonry scripts dynamically
      const masonryScript = document.createElement('script');
      masonryScript.src = 'https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js';
      masonryScript.defer = true;
      document.head.appendChild(masonryScript);
      
      const imagesLoadedScript = document.createElement('script');
      imagesLoadedScript.src = 'https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js';
      imagesLoadedScript.defer = true;
      document.head.appendChild(imagesLoadedScript);
      
      const mansoryScript = document.createElement('script');
      mansoryScript.src = '{{ "/assets/js/mansory.js" | relative_url }}';
      mansoryScript.defer = true;
      document.head.appendChild(mansoryScript);
    }
  });
</script>
{% endif %}
