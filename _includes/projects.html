<div class="projects">
  {% for category in page.display_categories %}
  <h2 class="category">{{category}}</h2>
  {% assign categorized_projects = site.projects | where:"category", category %}

  {% if page.horizontal %}
  <div class="container">
    <div class="row row-cols-2">
      {% assign sorted_projects = categorized_projects | sort: "importance" %}
      {% for project in sorted_projects %}
      <div class="card-item col">

        {% if project.redirect %}
        <a href="{{ project.redirect }}" target="_blank">
          {% else %}
          <a href="{{ project.url | relative_url }}">
            {% endif %}

            <div class="card hoverable">
              <div class="row g-0">

                <div class="card-img col-md-6">
                  {% if project.img %}
                  <img src="{{ project.img | relative_url }}" alt="project thumbnail">
                  {% endif %}
                </div>

                <div class="col-md-6">
                  <div class="card-body">
                    <h4 class="card-title text-lowercase">{{ project.title }}</h4>
                    <p class="card-text">{{ project.description }}</p>

                    <div class="row ml-1 mr-1 p-0">
                      {% if project.github %}
                      <div class="github-icon">
                        <div class="icon" data-toggle="tooltip" title="Code Repository">
                          <a href="{{ project.github }}" target="_blank"><i class="fab fa-github gh-icon"></i></a>
                        </div>
                        {% if project.github_stars %}
                        <span class="stars" data-toggle="tooltip" title="GitHub Stars">
                          <i class="fas fa-star"></i>
                          <span id="{{ project.github_stars }}-stars"></span>
                        </span>
                        {% endif %}
                      </div>
                      {% endif %}
                    </div>

                  </div>
                </div>

              </div>
            </div>

          </a>

      </div>
      {% endfor %}
    </div>
  </div>

  {% else %}
  <div class="grid">
    {% assign sorted_projects = categorized_projects | sort: "importance" %}
    {% for project in sorted_projects %}
    <div class="grid-item">
      {% if project.redirect %}
      <a href="{{ project.redirect }}" target="_blank">
        {% else %}
        <a href="{{ project.url | relative_url }}">
          {% endif %}
          <div class="card hoverable">
            {% if project.img %}
            <img src="{{ project.img | relative_url }}" alt="project thumbnail">
            {% endif %}
            <div class="card-body">
              <h2 class="card-title text-lowercase">{{ project.title }}</h2>
              <p class="card-text">{{ project.description }}</p>
              <div class="row ml-1 mr-1 p-0">
                {% if project.github %}
                <div class="github-icon">
                  <div class="icon" data-toggle="tooltip" title="Code Repository">
                    <a href="{{ project.github }}" target="_blank"><i class="fab fa-github gh-icon"></i></a>
                  </div>
                  {% if project.github_stars %}
                  <span class="stars" data-toggle="tooltip" title="GitHub Stars">
                    <i class="fas fa-star"></i>
                    <span id="{{ project.github_stars }}-stars"></span>
                  </span>
                  {% endif %}
                </div>
                {% endif %}
              </div>
            </div>
          </div>
        </a>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  {% endfor %}
</div>